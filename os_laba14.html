<!DOCTYPE html>
<html>
<head>
	<title>Практическая работа #14</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="720">
	<link rel="stylesheet" href="css/style.css">
    <link href="http://fonts.googleapis.com/css?family=Raleway:700,300" rel="stylesheet"
          type="text/css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/prettify.css">
</head>
<body>


<div class="wrapper">
    <nav>
        <div class="pull-left">
            <h1><a href="/os-mpt"><span>Все материалы</span></a></h1>
        </div>
        <div class="pull-right">
        </div>
    </nav>
    <header>
        <div class="container">
            <h2 class="lone-header">Лабораторная #14 по ОС</h2>
        </div>
    </header>
    <section>
        <div class="container">
            <ul class="docs-nav">
                <li><a href="#init" class="cc-active">Введение</a></li>
                <li><a href="#exe" class="cc-active">Выполнение</a></li>  
                <li><a href="#qwe" class="cc-active">Контрольные вопросы</a></li>
                <li><a href="#source" class="cc-active">Ссылки</a></li>
            </ul>
			
            <div class="docs-content">
            <h2>Лабораторная работа №14 - «Установка простого Web-сервера(LAMP)».</h2>

			<b>Цель работы:</b> Целью работы является получение практических навыков по установке и настройке локального сервера на Unix. 


             <h3 id="init">Введение</h3>

           
             <p><b>Что вообще такое web-сервер и с чем его кушают?</b>
                Веб-сервер (web-server) - это сервер, отвечающий за прием и обработку запросов (HTTP-запросов) от клиентов к веб-сайту. В качестве клиентов обычно выступают различные веб-браузеры. В ответ веб-сервер выдает клиентам HTTP-ответы, в большинстве случаев, вместе с HTML-страницей, которая может содержать: всевозможные файлы, какие-то изображения, медиа-поток или любые другие данные.</p>
            <p>Современный сайт представляет собой не просто набор HTML-документов, но и включает в себя множество технологий, в том числе серверных, таких как: SSI (Server-Side Includes, включения на стороне сервера), PHP (PHP: Hypertext Preprocessor, PHP: препроцессор гипертекста), базы данных и многое другое. Для ознакомления и изучения этих технологий ошибкой будет использовать посещаемый рабочий сайт в Интернете, поэтому имеет смысл установить необходимый комплект программ на локальный компьютер и тестировать все на нем. </p>

            <p>Наиболее популярной связкой таких программ является веб-сервер Apache, язык программирования PHP, система управления базами данных MySQL, оболочка для администрирования баз данных PhpMyAdmin.</p>

            <p>Указанные программы работают преимущественно под управлением Linux подобных систем, но имеются и версии под Windows. Основной плюс этой связки программ в универсальности. Сайт, созданный и проверенный на локальном компьютере под Windows, легко может быть перенесен на сервер с FreeBSD. К тому же этот набор поддерживает подавляющее большинство хостеров.</p>

            <p><b>Веб-сервер</b></p>
            <p>Веб-сервером называется программа, которая анализирует приходящие запросы и формирует готовые документы отправляемые пользователю. В качестве веб-сервера часто выступает Apache, как наиболее устоявшийся и популярный в Интернете. По разным оценкам его доля составляет почти 50% от общего числа используемых веб-серверов.
            Вот одни из популярных версий web-серверов(тут имеется именно по, которые объединяет как БД, так ЯП, и сам сервер)</p>

            <ol>
                <li>AppServ</li>
                <li>VertrigoServ</li>
                <li>XAMPP</li>
                <li>OpenServer</li>
                <li>Endels</li>
                <li>Wampserver </li>
                <li>LAMP(различные его сборки)</li>
            </ol>

             <h3 id="exe">Выполнение</h3>

             <p>Стек LAMP - это набор программного обеспечения с открытым исходным кодом, которой обычно устанавливается на сервер для отображения динамических веб-сайтов и веб-приложений. Эта аббревиатура обозначает операционную систему <b>L</b>inux с установленым веб-сервером <b>A</b>pache. Данные сайта хранятся в базе данных <b>M</b>ySQL, динамический контент обрабатывается с помощью <b>P</b>HP.</p>
             <p>Иногда букву P в аббревиатуре расшифровывают как Perl и Python, другие возможные языки веб-разработки.</p>
             <p>Существует множество вариантов термина, в частности:</p>
             <ol>
                 <li>LEMP — Nginx вместо Apache (Nginx читается Engine-X)</li>
                 <li>LNMP — другой вариант названия 'Nginx вместо Apache'</li>
                 <li>BAMP — BSD вместо Linux</li>
                 <li>MAMP — Mac OS X вместо Linux.</li>
                 <li>SAMP — Solaris вместо Linux</li>
                 <li>WAMP — Microsoft Windows вместо Linux</li>
                 <li>WASP — Windows, Apache, SQL Server и PHP</li>
                 <li>WIMP — Windows, IIS, MySQL и PHP</li>
                 <li>PAMP — Personal Apache MySQL PHP — набор серверов для платформы S60</li>
                 <li>FNMP — FreeBSD и Nginx вместо Linux и Apache.</li>
                 <li>XAMPP — кроссплатформенная сборка веб-сервера, X (любая из четырёх операционных систем), Apache, MySQL, PHP, Perl</li>
                 <li></li>
             </ol>
             <p><b>ШАГ 1 - Установка Apache</b></p>
             <p>Веб-сервер Apache в настоящее время является одним из самых популярных веб-серверов в мире, что делает его прекрасным выбором для хостинга веб-сайта. Мы с легкостью можем установить Apache используя менеджер пакетов Ubuntu apt. Менеджер пакетов позволяет нам легко установить большую часть программного обеспечения из репозиториев Ubuntu. Для начала установки выполним команд</p>
<pre class="prettyprint">
sudo apt-get update
sudo apt-get install apache2
</pre>  
            <p>Поскольку мы используем команду sudo, эти команды будут выполняться с привилегиями root. В процессе операционная система запросит ваш пароль пользователя. После завершения выполнения этих команд ваш веб-сервер будет установлен.Запустите его вот этой командой на всякий случай, вдруг он сам не заработает. </p>

            <p>Данная команда (service имя_службы start\stop\restart) работает с демонами в linux, то есть аналогами служб в windows.</p>
            <img src="image/lab14/image1.png">
            <p>Проверить результат установки можно набрав в вашем веб-браузере localhost</p>
            <p>Вы увидите страницу Apache, отображаемую по умолчанию для информации и целей тестирования. Она должна выглядеть похожим образом:</p>
            <img src="image/lab14/image2.jpeg">
            <p>Если вы видите эту страницу, ваш веб-сервер корректно установлен. Собсивенно это и есть та шутка которая принимает HTTP-запросы от клиентов, обычно веб-браузеров, и выдающий им HTTP-ответы, как правило, вместе с HTML-страницей, изображением, файлом, медиа-потоком или другими данными.</p>
            <p>
                <ol>
                    <li>Apache — свободный веб-сервер, наиболее часто используемый в UNIX-подобных операционных системах</li>
                    <li>IIS от компании Microsoft, распространяемый с ОС семейства Window</li>
                    <li>nginx — свободный веб-сервер, разрабатываемый Игорем Сысоевым с 2002 года и пользующийся большой популярностью на крупных сайтах</li>
                    <li>lighttpd — свободный веб-сервер</li>
                    <li>Google Web Server — веб-сервер, основанный на Apache и доработанный компанией Google</li>
                    <li>Resin — свободный веб-сервер приложений</li>
                    <li>Cherokee — свободный веб-сервер, управляемый только через web-интерфейс</li>
                    <li>Rootage — веб-сервер, написанный на java</li>
                    <li>THTTPD — простой, маленький, быстрый и безопасный веб-сервер</li>
                </ol>
            </p>

            <p><b>Настройка виртуальных хостов</b></p>
            <p>Зачем нужно? Нужно для того, чтобы если вы разрабатываете и тестите несколько сайтов на одной машине локально, это делает работу с ними более удобной.</p>

            <p>Создайте новую папку для нашего виртуального хоста и дайте ей права:</p>
            <img src="image/lab14/image3.png">
            <p>И в ней создайте ещё одну папку, для приветственного сообщения </p>
            <img src="image/lab14/image4.png">
            <p>Создайте файл для кода, который идёт ниже</p>
            <img src="image/lab14/image5.png">
            <img src="image/lab14/image6.png">
            <p>Теперь можно добавлять виртуальный хост, для этого создайте файл и наполните его содержимым:</p>
            <img src="image/lab14/image7.png">
            <p><b>Если захотите назвать сайт по своему, то будьте внимательнее с этим файлом! Да и вообще в целом внимательнее. </b></p>
            <img src="image/lab14/image8.png">
            <p>Вот что значат некоторые строки:</p>
            <ol>
                <li>ServerName - имя нашего сайта, виртуального хоста</li>
                <li>ServerAlias - сайт будет доступен также по этому имени</li>
                <li>DocumentRoot - корневой каталог с файлами сайта</li>
            </ol>
            <p>Теперь сохраните файл, далее нужно активировать наш хост:</p>
            <img src="image/lab14/image9.png">
            <img src="image/lab14/image10.png">

            <p>Теперь необходимо завернуть трафик с этого домена на локальный сервер, для этого добавьте строчку в /etc/hosts:</p>
            <img src="image/lab14/image11.png">

            <p>Вот в принципе и все, что-то случилось с кодировочкой, но это пока не важно.</p>
            <img src="image/lab14/image12.png">

            <p>Ну и так как мы ещё любим безопасность (все данные между сервером и клиентом будут шифроваться), требуется включить ssl.</p>
            <p>Протокол SSL представляет собой стандартную технологию безопасности, которая используется для установления шифрованного соединения между веб-сервером и веб-клиентом. SSL позволяет безопасно обмениваться данными благодаря идентификации и проверки подлинности сервера, а также обеспечению конфиденциальности и целостности всех передаваемых данных. Поскольку SSL предотвращает перехват или взлом данных, отправляемых по сети, его необходимо использовать со всеми механизмами регистрации или аутентификации, а также во всех сетях, в которых происходит обмен конфиденциальной информацией.</p>

            <p>SSL позволяет защитить имена, пароли и другую важную информацию от дешифровки в канале связи между Web Adaptor и сервером. При использовании SSL подключение к веб-страницам и ресурсам осуществляется по протоколу HTTPS, а не HTTP.</p>

            <p>Его настройка осуществляется тремя</p>
            <img src="image/lab14/image13.png">
            <img src="image/lab14/image14.png">
            <img src="image/lab14/image15.png">
            <p>Т.к. у нашего ssl соединения нет сертификата, то будут небольшие проблемы, но мы то с вами знаем, что нашему сайту можно доверять, так то можете добавить в исключения.</p>
            <img src="image/lab14/image16.png">

            <p><b>ШАГ 2 – Установка php7</b></p>
            <p>Без языка программирования установка и настройка lamp в Ubuntu будет не завершена. PHP - это самый популярный язык программирования в веб. Его название, это рекурсивный акроним - PHP Hypertext Processor. Кроме того, что этот язык используется в веб, его можно применять, как язык общего назначения, язык сценариев. Это последняя версия которая вышла на сегодняшний день.</p>
            <p>Установка php 7 Ubuntu 16.04 выполняется следующей командой:</p>
            <img src="image/lab14/image17.png">
            <p>Если вы хотите установить все доступные модули php, вы можете выполнить команду:</p>
<pre class="prettyprint">
sudo apt-get install php*
</pre>  
            <p>Проверьте версию php следующей командой.</p>
            <img src="image/lab14/image18.png">

            <p>Теперь надо проверить как все работает. Для этого создайте файл со следующим кодом на php:</p>
            <img src="image/lab14/image19.png">
            <img src="image/lab14/image20.png">
            <p>И не забудьте все перезапустить. Из-за установки php.</p>
            <img src="image/lab14/image21.png">
            <p>Увидите вот такую страницу. </p>
            <img src="image/lab14/image22.png">
            <p>И последнее и одно из самых основных:</p>
            <p>Но нужно еще кое-что настроить, а именно включить отображение ошибок в php. Иначе при возникновении ошибки вы увидите просто пустую страницу. Для этого откройте файл /etc/php/7.0/apache2/php.ini, найдите строку display_errors = Off и поменяйте off на on:</p>
            <img src="image/lab14/image23.png">

            <p><b>ШАГ 3 - Установка MariaDB</b></p>
            <p>Базы данных используются сейчас почти в каждом движке интернет сайтов. Поэтому важно иметь на своем компьютере и это программное обеспечение. Установка Lamp не может обойтись без базы данных, но в этом случае мы вместо Mysql(как обычно бывает во всех случаях) будем использовать ее улучшенную и оптимизированную версию - MariaDB. Это очень надежный и масштабируемый сервер SQL со множеством улучшений и усовершенствованием.</p>
            <p>Разница между Mysql и MariaDB не такая уж и огромная для рядовых пользователей, а смысл выполняют одинаковый. </p>
            <p>Для особо одарённых студентов могу предложить задание:
            <b>Установить MySQL за место MariaDB, либо вообще собрать свой стек LAMP. Со своими севером, своими языком и своей БД.</b></p>
            <p>Теперь, когда наш веб-сервер установлен и запущен надо установить базу данных</p>
            <img src="image/lab14/image24.png">
            <p>После установки её необходимо настроить.</p>
            <img src="image/lab14/image25.png">

            <p>Сначала введете пароль для доступа к базе данных ,<b> лучше и тут и далее использовать одинаковый пароль, вам же проще будет разобраться.</b></p>
            <img src="image/lab14/image26.png">

            <p>Отключаем гостевые аккаунты</p>
            <img src="image/lab14/image27.png">

            <p>Отключаем удаленный доступ через root:</p>
            <img src="image/lab14/image28.png">

            <p>Удаляем тестовые базы данных:</p>
            <img src="image/lab14/image29.png">

            <p>Перезаписываем таблицы привилегий:</p>
            <img src="image/lab14/image30.png">
            <p>Собственно все.</p>


            <p><b>Установка phpmyadmin</b></p>


            <p>Phpmyadmin - это бесплатный инструмент, с открытым исходным кодом, для реализации веб-интерфейса управления базами данных. Он доступен в официальных репозиториях Ubuntu 16.04, установим его с помощью команды:</p>

<pre class="prettyprint">
sudo apt-get install phpmyadmin php-mbstring php-gettext
</pre> 

            <p>Далее попрёт его установка, тут мы выбираем сервер, который будет использоваться. Для перемещения по пунктам используйте стрелки вверх/вниз, для выбора пробел, для переключения - Tab.</p>
            <img src="image/lab14/image31.png">

            <p>В следующем окне мастера нам предлагают настроить базу данных phpmyadmin, соглашаемся:</p>
            <img src="image/lab14/image32.png">


            <p>Ещё один пароль, вводим его, помните, что я говорил про одинаковые пароли.</p>
            <img src="image/lab14/image33.png">

            <p>И  на этом почти все.
            По умолчанию в MariaDB есть плагин под названием unix_socket, он предотвращает вход под именем пользователя root в phpmyadmin или с помощью других TCP интерфейсов. Для его отключения выполните:</p>
<pre class="prettyprint">
$ sudo -i
$ echo "update user set plugin='' where User='root'; flush privileges;" | mysql -u root -p mysql
</pre>           
            <p>Надо вести пароль от базы данных (тот, который первый раз указывали выше при установке)</p>

            <img src="image/lab14/image34.png">
            <p>Если вдруг у вас phpmyadmin не будет запускаться, и будет 404, то просто добавьте в конец файла /etc/apache2/apache2.conf строку</p>
<pre class="prettyprint">
Include /etc/phpmyadmin/apache.conf
</pre> 
            <p>И перезапустите апач. Будет такое вот окно. Вводите пароль и заходите. </p>
            <img src="image/lab14/image35.png">

            <p>Вот такой незамысловатый интерфейс, язык, если что можно будет поменять </p>
            <img src="image/lab14/image36.png">

            <p>Все как мы хотели.</p>
            <img src="image/lab14/image37.png">

            <p><b>В заключение</b></p>
            <p>Теперь, когда ваш стек LAMP установлен, у вас есть множество вариантов того, что делать дальше.</p>
            <p>Фактически, вы установили платформу, которая позволит установить (развернуть) большинство типов веб-сайтов и сетевого программного обеспечения на вашем сервере.</p>


             <h3 id="qwe">Контрольные вопросы</h3>
             <ol>
                 <li>Что такое Apache?</li>
                 <li>Что LAMP и какие его варианты бывают?</li>
                 <li>Для каких целей может понадобиться сервер?</li>
                 <li>Какой командой устанавливаются программы под Linux?</li>
                 <li>Что такое PHP?</li>
             </ol>

			<h3 id="source">Ссылки</h3>
			<ol>
                <li><a href="http://help.ubuntu.ru/manual/терминал"> Гайд по терминалу в Ubuntu </a></li>
                <li><a href="http://help.ubuntu.ru/wiki/lamp"> По поводу LAMP </a></li>
                 <li><a href="http://help.ubuntu.ru/wiki/apachemysqlphp"> По поводу LAMP 2 </a></li>
			</ol>
			
            </div>
        </div>
    </section>
</div>
<script src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/prettify/prettify.js"></script>
<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?lang=css&skin=sunburst"></script>
<script src="js/layout.js"></script>
</body>
</html>

