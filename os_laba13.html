<!DOCTYPE html>
<html>
<head>
	<title>Практическая работа #13</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="720">
	<link rel="stylesheet" href="css/style.css">
    <link href="http://fonts.googleapis.com/css?family=Raleway:700,300" rel="stylesheet"
          type="text/css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/prettify.css">
</head>
<body>


<div class="wrapper">
    <nav>
        <div class="pull-left">
            <h1><a href="/os-mpt"><span>Все материалы</span></a></h1>
        </div>
        <div class="pull-right">
        </div>
    </nav>
    <header>
        <div class="container">
            <h2 class="lone-header">Лабораторная #13 по ОС</h2>
        </div>
    </header>
    <section>
        <div class="container">
            <ul class="docs-nav">
                <li><a href="#init" class="cc-active">Введение</a></li>
                <li><a href="#exe" class="cc-active">Выполнение</a></li>        
                <li><a href="#qwe" class="cc-active">Контрольные вопросы</a></li>
                <li><a href="#source" class="cc-active">Ссылки</a></li>
            </ul>
			
            <div class="docs-content">
            <h2>Лабораторная работа №13 - «Работа с протоколами SSH, FTP.</h2>

			<b>Цель работы:</b> Целью работы является изучение методов протоколов SSH, FTP. 


             <h3 id="init">Введение</h3>

            <p><b>Для тех у кого macbook или что то unix подобное стоит на ПК, вам придётся «поднять» виртуальную машину с windows и коннектиться туда, либо как то ещё выкрутиться. Главное в этой работе отработать работу с протоколами FTP и SSH.</b> </p>

            <p><b>FTP</b> - стандартный протокол, предназначенный для передачи файлов по TCP-сетям (например, Интернет). Использует 21-й порт. FTP часто используется для загрузки сетевых страниц и других документов с частного устройства разработки на открытые сервера хостинга. </p>
            <p>Протокол построен на архитектуре «клиент-сервер» и использует разные сетевые соединения для передачи команд и данных между клиентом и сервером. Пользователи FTP могут пройти аутентификацию, передавая логин и пароль открытым текстом, или же, если это разрешено на сервере, они могут подключиться анонимно. Можно использовать протокол SSH для безопасной передачи, скрывающей (шифрующей) логин и пароль, а также шифрующей содержимое.</p>
            <p><b>SSH</b> -  сетевой протокол прикладного уровня, позволяющий производить удалённое управление операционной системой или для передачи файлов. Но в отличие от, например, FTP,  шифрует весь трафик, включая и передаваемые пароли. SSH допускает выбор различных алгоритмов шифрования. SSH-клиенты и SSH-серверы доступны для большинства сетевых операционных систем. Таким образом, можно не только удалённо работать на компьютере через командную оболочку, но и передавать по шифрованному каналу звуковой поток или видео. Большинство хостинг-провайдеров за определённую плату предоставляют клиентам доступ к их домашнему каталогу по SSH. Это может быть удобно как для работы в командной строке, так и для удалённого запуска программ (в том числе графических приложений). </p>


            <h3 id="exe">Выполнение</h3>
            <p>Для начала настроим саму виртуальную машину. Заходим в меню Файл->Настройки-> Сеть. Далее смотрим, чтобы все было приблизительно так же, если чего-то нету, то создаем и прописываем. Тут виртуальный сетевой адаптер для виртуальной машины. </p>
            <img src="image/lab13/image001.gif">

            <p>Настройки конкретного virtualbox Ethernet adapter’а:</p>
            <img src="image/lab13/image002.gif">
            <img src="image/lab13/image003.gif">

            <p>Идём в настройки самой виртуальной машины, на вкладку сеть, и меняем «тип подключения» на <b>виртуальный адаптер хоста</b>, который был выше. </p>
            <p><b>После данных манипуляций у вас пропадёт интернет на виртуалке, так что как закончили, можно все вернуть как было, то есть просто поменять тип подключения как было </b></p>
            <img src="image/lab13/image004.gif">

            <p>Далее запускаем саму виртульную машину и ставим себе ssh вот такой командой.</p>
            <img src="image/lab13/image005.gif">
            <p><b>Настройка SSH</b></p>
            <p>Настройки хранятся в файле<b> /etc/ssh/sshd_config. Далее будет список параметров которые желательно изменить:</b></p>
            <ol>
                <li>
                    <p><b>"Port 22"</b> - номер порта по умолчанию. Желательно установить в другое значение, т.к. первым делом ломятся на этот порт, Конечно, и другие порты тоже сканируют, но лишняя защита не помешает.</p>
                    <img src="image/lab13/image006.gif">
                </li>
                <li>
                    <p><b>"PermitRootLogin no"</b> - обязательно установите значение в "no". Это запрещает логинится рутом через ssh.</p>
                    <img src="image/lab13/image007.gif">
                </li>
                <li>
                    <p><b>AllowUsers name_user</b> - этого параметра нет в конфиге, допишите его. name_user - это имя пользователя в системе, которому разрешен вход по ssh.К имени можно добавить ip-адрес - name_user@IP Такой параметр разрешит логинится только пользователю name_user и только при условии, что он подключается с указанного IP.</p>
                </li>
                <li>
                    <p><b> PermitEmptyPasswords no</b> - Запретить пустые пароли.</p>
                </li>
            </ol>
            <p>На этом примитивная настройка закончилась. После произведенных настроек, перезапускаем демон(<s>службу/фоновый процесс</s>) sshd:</p>
<pre class="prettyprint">
sudo /etc/init.d/ssh restart
</pre>
            <p>Или так</p>
<pre class="prettyprint">
service ssh restart 
</pre>            
            <p>Далее проверяем его статус (<s>service ssh status</s>), должен быть запущен, если он не запущен запустите его командой <b>service ssh start</b> </p>
            <img src="image/lab13/image008.gif">

            <p>Далее командой ifconfig смотрим какой у нас адрес, в моём случае это 192.168.56.101, запомните его, по нему позже будем коннектиться к серваку. </p>
            <img src="image/lab13/image009.gif">

            <p>Создаём, а можем и не создать, себе нового пользователя, чтобы потестить ssh (лучше укажите имя просто из букв, без спец символов, не делайте как я).</p>
            <img src="image/lab13/image010.gif">

            <p><a href="http://putty.org.ru/download.html"> Скачиваем</a> программу, с помощью неё будем коннектиться к нашему серверу (точнее к нашей виртуальной машине)</p>
            <img src="image/lab13/image011.png">
            <p>PuTTY — свободно распространяемый клиент для различных протоколов удалённого доступа, включая SSH, Telnet, rlogin. Также имеется возможность работы через последовательный порт.
            PuTTY позволяет подключиться и управлять удаленным узлом (например, сервером). В PuTTY реализована только клиентская сторона соединения — сторона отображения, в то время как сама работа выполняется на другой стороне.(с)wiki </p>

            <p>Скачиваем архив и распаковываем его. Нас интересует putty portable, хотя можно просто putty. Вон, даже исходники есть. </p>
            <img src="image/lab13/image012.gif">
            <p>Заходим в папку и ищем exe-шник «putty_portable.exe» и запускаем его. </p>
            <img src="image/lab13/image013.gif">

            <p>Вот такой интерфейс, как видно по меню слева, программа имеет массу настроек и многофункциональна.</p>
            <img src="image/lab13/image014.gif">
            <p>Для коннекта указываем - <b>имя_пользователя_на_сервере@адрес_сервера.</b>
                То есть в моем случае <b>test2@192.168.56.101.</b>
                Так же в некоторых случаях за место ip, может быть какой то домен, то есть:
                <b>Test2@mpt.edu.ru</b>, смысл в принципе тот же. 
                <b>Если вы меняли порт в настройках ssh сервера на забываем его поменять и тут.</b> </p>
            <img src="image/lab13/image015.gif">

            <p>Если все верно указали, то у вас спросит пароль пользователя, вводим его (тот самый пароль, который в системе установлен для входа).</p>
            <img src="image/lab13/image016.gif">
            <p>Ввели пароль и решительно зашли. Вообще данный протокол может использоваться почти для чего угодно, мы можем как управлять самой машиной, что то делать, настраивать, да хоть программировать. </p>
            <a href="https://habrahabr.ru/post/122445/"> Статья о SSH</a>

            <p>Теперь немного инфы, для тех у кого mac или вдруг unix подобная система стоит. 
            Вы у себя будете должны «поднять» виртуальную машину с windows и коннектиться туда (либо как то ещё выкрутиться). </p>
            <p>Пользователи операционных систем Mac OS X или Linux могут использовать стандартное приложение terminal для подключения к виртуальному серверу по SSH протоколу. Для подключения к Вашему виртуальному серверу используйте следующую команду (измените 188.127.236.62 на IP адрес вашего сервера и имя пользователя тоже поменяйте):</p>
<pre class="prettyprint">
ssh root@188.127.236.62
</pre>  
            
            <p><b>Теперь непосредственно работа с SSH.</b></p>
            <img src="image/lab13/image017.gif">

            <p>Как гласит история команд, когда то был создан маленький файл, будем его скачивать.</p>
            <img src="image/lab13/image018.gif">
            <ol>
                <p>Скачивать будем на винду с линукса:</p>
                <li>Откроем cmd и зайдём туда, куда скачали putty;</li>
                <li>Введем команду, только вводить нужно с вашими данными, которые вы уже выше узнали;</li>
                <li>Разберем команду: pscp.exe – программа скачивающая файлы по ssh, test2 – имя пользователя, 192.168.56.101 – адрес сервака, /home/test2/nya – путь до файла на виртуалке с линуксом, D:\test_ssh – куда кинуть файл на винде. <img src="image/lab13/image019.gif"></li>
            </ol>
            <p>Вот скаченный файл:</p>
            <img src="image/lab13/image020.gif">

            <p>Теперь скачаем всю домашнюю директорию пользователя. Команда особо не поменялась, только добавился флаг –r , которой говорит о рекурсивности команды, чтобы она обрабатывала все папки и подпапки. Вывод я немного опущу. </p>
            <img src="image/lab13/image021.gif">

            <p>Вот что мы скачали, побилась кодировка в названиях файлов, но это особо не важно. Кстати заметьте, загрузились даже скрытые файлы (которые с точной в имени).</p>
            <img src="image/lab13/image022.gif">

            <p>Теперь будем заливать файлы на сервак, собственно есть файл.</p>
            <img src="image/lab13/image023.gif">
            <p>Вот так выглядит команда. </p>
            <img src="image/lab13/image024.gif">
            <p>Смотрим через putty, что файл скачался.</p>
            <img src="image/lab13/image025.gif">



            <p>Ну и напоследок поработатет с графическим аналогом программы под windows, winscp.</p>
            <a href="https://winscp.net/eng/download.php"> Скачивается тут</a>

            <p>Выглядит вот так, особо не замысловато. Наша задача подключиться к нашей виртуальной машине. Выбираем <b>"новое подключение"</b> и вводим ваши данные. </p>
            <img src="image/lab13/image026.gif">

            <p>И подключаемся.</p>
            <img src="image/lab13/image027.gif">

            <p>Собственно вот, все нормально, подключились.</p>
            <img src="image/lab13/image028.gif">


             <h3 id="qwe">Контрольные вопросы</h3>
             <ol>
                 <li>Что такое SSH?</li>
                 <li>Что такое FTP? В чем преймущества SSH перед FTP.</li>
                 <li>Для каких целей могут понадобиться вышеописанные протоколы?</li>
             </ol>

			<h3 id="source">Ссылки</h3>
			<ol>
                <li><a href="http://help.ubuntu.ru/wiki/ssh"> Статья о SSH</a></li>
				<li><a href="http://gnu.su/news.php?extend.1613"> Статья о BASH</a></li>
				<li><a href="https://habrahabr.ru/post/47163/"> Статья #1 с хабра о BASH </a></li>
				<li><a href="https://habrahabr.ru/post/52871/"> Статья #2 с хабра о BASH </a></li>
                <li><a href="http://help.ubuntu.ru/manual/терминал"> Гайд по терминалу в Ubuntu </a></li>
			</ol>
			

            </div>
        </div>
    </section>
</div>
<script src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/prettify/prettify.js"></script>
<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?lang=css&skin=sunburst"></script>
<script src="js/layout.js"></script>
</body>
</html>

