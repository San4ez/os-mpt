<!DOCTYPE html>
<html>
<head>
	<title>Практическая работа #4</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="720">
	<link rel="stylesheet" href="css/style.css">
    <link href="http://fonts.googleapis.com/css?family=Raleway:700,300" rel="stylesheet"
          type="text/css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/prettify.css">
</head>
<body>


<div class="wrapper">
    <nav>
        <div class="pull-left">
            <h1><a href="/os-mpt"><span>Все материалы</span></a></h1>
        </div>
        <div class="pull-right">
        </div>
    </nav>
    <header>
        <div class="container">
            <h2 class="lone-header">Лабораторная #4 по ОС</h2>
        </div>
    </header>
    <section>
        <div class="container">
            <ul class="docs-nav">
                <li><a href="#init" class="cc-active">Введение</a></li>
                <li><a href="#exe" class="cc-active">Вызов</a></li>
                <li><a href="#event" class="cc-active">Планировщик заданий</a></li>
                <li><a href="#log_event" class="cc-active">Журнал событий</a></li>
                <li><a href="#sysper" class="cc-active">Системный монитор</a></li>
				<li><a href="#source" class="cc-active">Ссылки</a></li>
				<li><a href="#qwe" class="cc-active">Контрольные вопросы</a></li>
            </ul>
            <div class="docs-content">
            <h2>Лабораторная работа №4 - Работа с оснастками. Планировщик заданий, системный журнал.
			</h2>

			 <b>Цель работы:</b> Получить навыки работы с оснастками планировщик заданий и системным журналом.

			<h3 id="init">Введение</h3>
			<p>Who is who? При помощи <b>Планировщика заданий Windows 7</b> можно запланировать запуск любой программы в определенное время с определенными условиями. Также можно запланировать отправку электронной почты и даже вывод на экран определенного сообщения. Это касаемо Windows систем, если мы говорим про Unix, аналогом планировщика там будет <b>cron</b>, он используется для запуска определенных задач в определенный момент времени. 
			Планировщик задач — программа (служба или демон), часто называемая сервисом операционной системы, которая запускает другие программы в зависимости от различных критериев, как, например:
				<ol>
					<li>наступление определённого времени;</li>
					<li>переход операционной системы в определённое состояние (бездействие, спящий режим и т. д.);</li>
					<li>поступление запроса от администратора через пользовательский интерфейс или через инструменты удалённого администрирования</li>
				</ol>

			Планировщик заданий имеет примерно тот же интерфейс, что и другие инструменты администрирования — в левой части древовидная структура папок, по центру — информация о выбранном элементе, справа — основные действия над задачами. Доступ к этим же действиям можно получить из соответствующего пункта главного меню (При выборе конкретной задачи или папки пункты меню меняются на относящиеся к выбранному элементу). </p>
			<p>Планировщик заданий имеет примерно тот же интерфейс, что и другие инструменты администрирования — в левой части древовидная структура папок, по центру — информация о выбранном элементе, справа — основные действия над задачами. Доступ к этим же действиям можно получить из соответствующего пункта главного меню (При выборе конкретной задачи или папки пункты меню меняются на относящиеся к выбранному элементу).</p>
			<p>Основные действия в планировщике заданий</p>
			<p>В данном инструменте вам доступны следующие действия над задачами:</p>
				<ol>
					<li><b>Создать простую задачу</b> — создание задания с помощью встроенного мастера.</li>
					<li><b>Создать задачу</b> — то же, что и в предыдущем пункте, но с ручной настройкой всех параметров</li>
					<li><b>Импортировать задачу</b> — импорт ранее созданной задачи, которую вы экспортировали. Может пригодиться, если вам нужно настроить выполнение определенного действия на нескольких компьютерах (например, запуск проверки антивирусом, блокировка сайтов и прочее).</li>
					<li><b>Отображать все выполняемые задачи</b> — позволяет посмотреть список всех задач, которые запущены в настоящий момент времени</li>
					<li><b>Включить журнал всех заданий — позволяет включить и отключить ведение журнала планировщика заданий (записывает все действия, запускаемые планировщиком)</b></li>
					<li><b>Создать папку</b> — служит для создания собственных папок в левой панели. Можно использовать для собственного удобства, чтобы было понятно, что и где вы создали.</li>
					<li><b>Удалить папку</b> — удаление папки, созданной в предыдущем пункте.</li>
					<li><b>Экспорт</b> — позволяет экспортировать выбранную задачу для последующего использования на других компьютерах или на этом же, например, после переустановки ОС.</li>
				</ol>
			
			<p>Операционная система постоянно следит за различными событиями возникающими в вашей системе. В Microsoft Windows <b>событие (event) – это любое происшествие в операционной системе, которое записывается в журнал или требует уведомления пользователей или администраторов</b>. Это может быть служба, которая не хочет запускаться, установка устройства или ошибка в работе приложения. События регистрируются и сохраняются в журналах событий Windows и предоставляют важные хронологические сведения, помогающие вести мониторинг системы, поддерживать ее безопасность, устранять ошибки и выполнять диагностику. Необходимо регулярно анализировать информацию, содержащуюся в этих журналах. Вам следует регулярно следить за журналами событий и настраивать операционную систему на сохранение важных системных событий. В том случае, если вы администратор серверов Windows, то необходимо следить за безопасностью их систем, нормальной работой приложений и сервисов, а также проверять сервер на наличие ошибок, способных ухудшить производительность. Если вы пользователь персонального компьютера, то вам следует убедиться в том, что вам доступны соответствующие журналы, необходимые для поддержки своей системы и устранения ошибок.</p>

			<p>Программа «Просмотр событий» представляет собой <b>оснастку консоли управления Microsoft (MMC) и предназначена для просмотра и управления журналами событий</b>. <b>Служба Windows, которая управляет протоколированием событий, называется «Журнал событий». В том случае, если она запущена, Windows записывает важные данные в журналы.</b> При помощи программы «Просмотр событий» вы можете выполнять следующие действия:</p>
			<ol>
			<li>Просматривать события определенных журналов;</li>
			<li>Применять фильтры событий и сохранять их для последующего использования в виде настраиваемых представлений;</li>
			<li>Создавать подписки на события и управлять ими</li>
			<li>Назначать выполнение конкретных действий на возникновение определенного события.</li>
			</ol>
			<p>В UNIX есть аналог, называется <b>syslog</b>, он идёт по умолчанию, либо <b>auditd</b>, его требуется доставлять. Так же у каждого приложения (В большинстве своём, если мы говорим об чем то крупном, например сервера, тот же самый Apache или про СУБД, например MySQL.) есть свои файлы для логов.</p>
			<p>В этой лабораторной мы будет говорить про Windows системы поэтому ниже будет идти описание именно "виндовых" средств, с их Unix аналогами мы познакомимся в поздних лабораторных работах.</p>
			
			<h3 id="exe">Вызов</h3>
			<p>Теперь о том, как вызвать вышеописанные средства, чтобы познакомиться с их работой.</p>
			<ol>
				<li>С этими двумя оснастками можно работать через mmc, как было показано в прошлой лабораторной работе.</li>
				<li>Так же они есть в панели управления. То есть, откройте «Панель управления», из списка компонентов панели управления выберите «Администрирование» и из списка административных компонентов стоит выбрать «Просмотр событий» или планировщик заданий, либо просто воспользуйтесь поиском по панели управления, что вам и советуется делать;</li>
				<li>Так же их можно вызвать через  меню "Выполнить" т.е. сочетание клавиш - <b>win + r</b>. Для этого надо указать их название, а именно в случае с <b>планировщик заданий</b> это - <b>taskschd.msc</b>, а в случае с </b>журналом событий</b> это <b>eventvwr.msc</b></li>
				<li>Так же их можно вызвать либо через PowerShell, либо cmd, указав их названия или <b>taskschd.msc</b> или  <b>eventvwr.msc</b></li>
			</ol>
			
			
			<h3 id="event">Планировщик заданий</h3>
			<p>Для выполнения работы требуется проделать аналогичные действия представленные ниже.</p>
			<p>Начнём с оснастки "Планировщик заданий". Как вызвать её было описано выше, теперь перейдём непосредственно к тому, что требуется сделать и познакомимся с интерфейсом и функционалом.</p>
			<p>Начнём с создания задачи. После открытия оснастки перед вами будет вот такое окно, окно стандартное для большинства оснасток windows, слева древовидная структура показывающая различное установленное ПО в вашей системе, и их текущие задачи, которые можно просмотреть и что то с ними сделать, по центру собственно само окно с задачами и их параметрами, в правой части различные функциональные элементы управления. Ваша же задача нажать в правом меню на кнопку «Создать задачу» </p>
			<img src="image/lab4/main_win.jpg">
		
			<p>Пока создадим простую задачу, то есть в левом меню нажать на «Создать простую задачу, перед вами откроется вот такое окно»</p>
			<img src="image/lab4/simple_task.jpg">
			
			<p>Выбираем триггер, по которому событие будет срабатывать. Требуется выбрать, когда будет выполняться задание: можно выполнять ее по времени, при входе в Windows или включении компьютера, или же по возникновению какого-либо события в системе. При выборе одного из пунктов, вам также предложат задать время выполнения и другие детали.</p>
			<img src="image/lab4/trigger.jpg">
			
			<p>Указываем время, когда оповещение будет срабатывать</p>
			<img src="image/lab4/time_execute.jpg">
			
			<p>Выбираем, какую программу(или оповещение будет показывать) мы запустим при показе оповещения, я выберу запуск программы, вы можете что то ещё выбрать. </p>
			<img src="image/lab4/choice_prog.jpg">
			
			<p>Указываем путь к программе</p>
			<img src="image/lab4/path_dir.jpg">
			
			<p>Все готово. Так же можно поставить галочку на пункте «Открыть окно Совойства после нажатия кнопки Готово »</p>
			<img src="image/lab4/end_add_sim_task.jpg">
			
			<p>Чтобы просмотреть созданные задачи требуется нажать в меню слева на «Библиотека планировщика». Помимо моей задачи, там будут находиться задачи для других программ. Кстати, с помощью планировщика так же можно отслеживать деятельность вируса.  </p>
			<img src="image/lab4/view_sim_task.jpg">
			
			<p>Если вдруг задача не выполнилась и в библиотеке стоит ошибка вида:  </p>
			<img src="image/lab4/error1.jpg">
			<p>То требуется вызвать у события контекстное меню и выбрать там «свойства»</p>
			<img src="image/lab4/error2.jpg">
			<p>Выбрать там пункт условия, и посмотреть на их противоречивость, в моём случае сообщение не показывалось из-за того, что стояла галочка напротив «Запускать только при питании от сети»</p>
			<img src="image/lab4/error3.jpg">
			
			<p>Вывод сообщения</p>
			<img src="image/lab4/view_message.jpg">
			
			
			<p>Так же помимо простого мастера создания задач, есть продвинутый мастер создания задач, конечный смысл у них одинаковый - задача, но во втором случае даётся больше параметров для настройки оного.</p>
			
			<p>Так же от вас требуется сделать ещё одно событие при помощи продвинутого мастера и отразить это в отчёте. Требуется нажать на «Создать задачу»</p>
			<img src="image/lab4/advanced_task.jpg">
			
			<p>В окне Создание задачи введите название новой задачи и ее описание. Если нужно запускать программу с повышенными правами администратора, то активируйте функцию «Выполнить с наивысшими правами.»</p>
			<img src="image/lab4/advanced_task.PNG">
			
			<p>Переключитесь на вкладку Триггеры, нажмите кнопку Создать и назначьте дату, время и частоту выполнения задачи. Чтобы установить дату, когда выполнение задачи по расписанию будет прекращено, активируйте функцию Срок действия и укажите дату и время.</p>
			<img src="image/lab4/time_adv_task.jpg">
			
			<p>Перейдите на вкладку Действия и нажмите кнопку Создать.
			Чтобы запланировать выполнение программы по указанному расписанию, в раскрывающемся списке Действие выберите Запуск программы и с помощью кнопки Обзор укажите местоположение исполняемого файла.</p>
			<img src="image/lab4/add_adv_task_act.jpg">
			
			<p>И дальше в таком же духе.</p>
			
			
			<h3 id="log_event">Журнал событий</h3>
			<p>Как вызвать данную оснастку было описанно выше. При вызове её появиться следующее окно: </p>
			<img src="image/lab4/main_wind_event.PNG">
			
			<p>Данное окно обладает стандартной структурой оснасток windows. В левой его части находится древовидная структура в которой отображаются различные журналы, как системные, так и различных приложений. По центру находится окно, в котором отображаются конкретные события в зависимости от выбранного журнала, где их можно посмотреть и узнать содержащуюся в них информацию, и в правой части располагаются различные функциональные кнопки для управления журналами.</p>
			
			<p>Допустим в левой части окна разверните древовидную структуру и найдите пункт "система" и просто просмотрите ваши события и попытайтесь найти что то критическое, у меня что то такое есть.</p>

			
			
			<p>Выберем критическое события и посмотрим информацию о нём. В моём случае жесткий диск уже сбоит, требуется проверить его через CHKDSK (CHKDSK (сокращение от англ. check disk — проверка диска) — стандартное приложение в операционных системах DOS и Microsoft Windows, которое проверяет жёсткий диск или дискету на ошибки файловой системы (например, один и тот же сектор отмечен как принадлежащий двум разным файлам). CHKDSK также может исправлять найденные ошибки файловой системы.)</p>
			<p>И вот такой мониторинг мы может осуществлять со всеми доступными нам журналами.</p>
			<img src="image/lab4/view_log_error.PNG">
			<p>Теперь по поводу информации, которое может содержать каждое подобное сообщение. Подобная информация, если нам повезёт, поможет найти решения какой-либо проблемы в интернете. </p>
			<ol>
				<li><b>Имя журнала</b> — имя файла журнала, куда была сохранена информация о событии.</li>
				<li><b>Источник</b> — название программы, процесса или компонента системы, которое сгенерировало событие (если вы видите здесь Application Error), то имя самого приложение вы можете увидеть в поле выше.</li>
				<li><b>Код</b> — код события, может помочь найти информацию о нем в Интернете. Правда, искать стоит в англоязычном сегменте по запросу Event ID + цифровое обозначение кода + название приложения, вызывавшего сбой (поскольку коды событий для каждой программы уникальны).</li>
				<li><b>Код операции</b> — как правило, здесь всегда указано «Сведения», так что толку от этого поля мало.</li>
				<li> <b>Категория задачи, ключевые слова</b> — обычно не используются.</li>
				<li><b>Пользователь и компьютер</b> — сообщает о том, от имени какого пользователя и на каком компьютере был запущен процесс, вызвавший событие.</li>
			</ol>
			<p>В примере выше, искать особо нечего, уже и так сказано, что требуется сделать, но в примере ниже, поиск действительно может чем то помочь. В этом примере skydrive (теперь это onedrive - облачный сервис от microsoft для хранения данных) периодически крашиться и мы можем "загуглить" код ошибки.</p>
			<img src="image/lab4/application-error-info.png">
			<img src="image/lab4/event-id-search.png">
			
			<p>Так же бы хотелось отметить, что большинство подобных предупреждений не представляют из себя что то опасное , а сообщения об ошибках не говорят о том, что с ПК, что то не так.</p>
			
			<p>Просмотр журнала производительности.</p>
			<p>Каждый журнал в этой оснастке разбирать не имеет смысла, из-за этого пройдёмся по основным, например журнал производительности Windows. Для этого в правой панели откройте Журналы приложений и служб — Microsoft — Windows — Diagnostics-Perfomance — Работает и посмотрите, есть ли среди событий какие-либо ошибки — они сообщают о том, что какой-то компонент или программа привела к замедлению загрузки Windows. По двойному клику по событию, вы можете вызвать подробную информацию о нем. </p>
			<img src="image/lab4/audit_performance.PNG">
			<p>Или например</p>
			<img src="image/lab4/warning_error.PNG">
			
			<p>С вашей стороны логично было бы предположить, что ориентироваться в таком большом количестве событий довольно проблематично, и вот как раз для этой цели есть фильтры и называются они "настраиваемое представление" и находятся в левой части окна с оснасткой, там есть кнопка "Создать настраиваемое представление"</p>
			<p>В моем случае я просто выбрал уровень события "критический" и выбрал журнал из которого события будут собственно фильтроваться.</p>
			<img src="image/lab4/filter_audit.png">
			
			<p>И вот так все это будет выглядит в итоге.</p>
			<img src="image/lab4/view_filter.PNG">
			
			<p>Так же помимо всего прочего облегчить жизнь вам поможет контекстное меню, у каждого журнала, где можно осуществить поиск по конкретному журнал и так же настроить его. Выполните функции этого меню и отразите это в отчёте, например создать настраиваемое представление, изменить свойства журнала, воспользоваться поиском, сохранить все события в отдельный файл то есть произведите экспорт и импорт журналов, так же отсортируйте и сгруппируйте записи в журнале с помощью этого меню и отразите действия в отчёте.</p>
			<img src="image/lab4/memu_audit.png">
			
			
			
			<h3 id="sysper">Системный монитор</h3>
			
			
			<p>Системный монитор Windows можно использовать для анализа влияния работы программ на производительность компьютера, как в реальном времени, так и посредством сбора данных журнала для последующей обработки.

			Системный монитор Windows использует счетчики производительности, данные трассировки событий и сведения о конфигурации, которые можно объединять в группы сборщиков данных.
			
			В общем итоге он позволяет отслеживать использование системных ресурсов, сбор и просмотр текущих данных производительности в виде счетчиков ресурсов сервера, например счетчиков использования процессора и оперативной памяти, а также многих ресурсов Microsoft SQL Server, таких как блокировки и транзакции.</p>
			
			<p> Запуск системного монитора</p>
			<p>Для запуска системного монитора требуется вызвать меню "Выполнить" и написать perfmon. Или воспользоваться поиском в панели управления управления, написав "монитор ресурсов". Ниже будут снимки экрана из windows 7,если вы используете другую ОС, некоторые функции могут быть в других местах. </p>

			<p>Перед вами собственно будет вот такое окно:</p>
			<img src="image/lab4/per_monitor.PNG">
			<p>У вас скорее всего будет несколько меньшее количество различных счетчиков, чтобы добавить новый счётчик к уже имеющимся требуется вызвать контекстное меню: <p>
			<img src="image/lab4/add_count.png">
			
			<p>И далее выбрать из уже имеющихся счётчиков, в моем случае я просто добавлю счётчик, который отображает время бездействия процессора, выделяете новый счетчик и жмёте кнопку "Добавить" и потом ОК. </p>
			<img src="image/lab4/add_new_count.PNG">
			
			<p>Вот такой график появиться в итоге.</p>
			<img src="image/lab4/view_new_count.PNG">
			
			
			<p>Теперь добавим новую группу сборщиков данных. Первые 2 шага, это имя, и путь куда будет сохраняться файл монитора ресурсов, далее добавите необходимые счётчики (точно так же как и при добавлении просто счётчика в монитор ресурсов.)</p>
			<img src="image/lab4/con_add_count.png">
			
			<p>Вот такая штука у вас получиться в итоге. Собственно для запуска надо нажать в контекстном меню кнопку "пуск"</p>
			<img src="image/lab4/start_collection.png">
			
			
			<p>Как только вы это сделаете сразу создаться такой вот лог, в который будет записываться производительность выбранный счётчиков системы.</p>
			<img src="image/lab4/exp_collection.PNG">
			
			<p>Этот файл потом можно будет открыть и посмотреть, что к чему. Просматривать файлы журнала можно на любом компьютере, где установлен Системный монитор. Таким образом данные счетчиков можно собирать на нескольких компьютерах, а просматривать на одном, их можно отправлять по электронной почте и т. д.</p>
			<img src="image/lab4/view_collection.PNG">
			
			<p>Также есть возможность настроить запуск сборщика данных по расписанию. Для этого следует кликнуть правой кнопкой мыши по группе сборщиков данных, для которой необходимо настроить расписание, и в контекстном меню выбрать пункт «Свойства» (Properties).</p>
			<img src="image/lab4/time_count.PNG">
			
			<p>Вот на этом пока закончим. Перед вами стоит задача проделать аналогичные действия, что были описаны выше.</p>
			
			
			<h3 id="source">Ссылки</h3>
			<ol>
				<li><a href="http://tavalik.ru/performance-monitor-sborshhiki-dannyx/">По поводу монитора ресурсов</a></li>
				<li><a href="https://technet.microsoft.com/ru-ru/library/cc749249(v=ws.11).aspx">По поводу монитора ресурсов 2</a></li>
				<li><a href="http://pk-help.com/server/perfmon/">Так же и тут можно посмотреть по поводу монитора ресурсов</a></li>
				<li><a href="http://www.oszone.net/10680">Об просмотре событий</a></li>
				<li><a href="http://remontka.pro/windows-event-viewer/">Тоже о просмотре событий</a></li>
				<li><a href="https://ru.wikipedia.org/wiki/Cron">Cron - аналог под unix</a></li>
				<li><a href="https://habrahabr.ru/company/selectel/blog/267833/">Аудит системных событий в Linux</a></li>
			</ol>
			
			
			<h3 id="qwe">Контрольные вопросы</h3>
			<ol>
				<li>Что такое монитор ресурсов, и что он позволяет сделать. </li>
				<li>Что такое аудит, как он осуществляется в Windows. </li>
				<li>Что такое планировщик событий, описать функционал планировщика событий.</li>
			</ol>
			
			
            </div>
        </div>
    </section>
</div>
<script src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/prettify/prettify.js"></script>
<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?lang=css&skin=sunburst"></script>
<script src="js/layout.js"></script>
</body>
</html>

